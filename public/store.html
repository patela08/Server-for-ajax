<!DOCTYPE html>
<html>
<head>
	<title>Store using BS</title>
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<style type="text/css">
		#rmv:hover{
			cursor: pointer;
		}
	</style>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			getData();
			$("#adBtn").on('click',function(e){
				e.preventDefault();
				$.ajax({
					url:"/products",
					type: "POST",
					data: {
						iName:$("input")[1].value,
						iDesc:$("input")[2].value,
						iPrc:$("input")[3].value
					},
					// success:
					// 	function(response){
					// 		$("#addBlock").append($('<div class="alert well col-sm-9"><div class="col-sm-9"><h3>'+ response.iName+'</h3><p>'+ response.iDesc+'</p></div><div class="col-sm-3" style="margin:20px 0px 0px 0px"><span class="label label-primary">'+"$"+response.iPrc+'</span><span class="glyphicon glyphicon-remove-sign" id="rmv" style="margin:0px 0px 0px 10px"></span></div></div>'));
					// 	}
					success:
						function (){
							getData();
						}
				});
				$("input").val(''); 	
			});
			function getData(){
				$.ajax({
					url: "/products",
					type:"GET",
					success:
						function myFunction(arr) {
							var out = '';
							var i = 0 ;
							for(i = 0; i < arr.length; i++){
								out += '<div class="alert well col-sm-9" id="'+arr[i].id+'" ><div class="col-sm-9"><h3>'+ arr[i].iName+'</h3><p>'+ arr[i].iDesc+'</p></div><div class="col-sm-3" style="margin-top:20px"><span class="label label-primary">'+"$"+arr[i].iPrc+'</span><span class="glyphicon glyphicon-remove-sign" id="rmv"></span></div></div>';
							}
							$("#addBlock").append(out);
						}
				});
			}
			$("#addBlock").on('click',"#rmv",function () {
				alert("jfksjfksd");
				var ID = $(this).closest("div").parent().attr('id');
				$.ajax({
					url:"/products",
					context:ID,
					dataType:"json",
					success:
						function () {
							$.ajax({
							    url: "/products/"+this,
							    type: 'DELETE',
							    success: 
							    	function(){
							    		alert("Product has been successfully removed");
							    	},
							});
						}
				});
				$(this).closest("div").parent().remove();	
			});
			
		});
	</script>
</head>
<body>
	<nav class="navbar navbar-inverse">
	   	<div class="container-fluid">
	   		<div class="navbar-header">
	   			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	   				<span class="icon-bar"></span>
	   				<span class="icon-bar"></span>
	   				<span class="icon-bar"></span>
	   				<span class="icon-bar"></span>
	   			</button>
	   			<a href="a" class="navbar-brand" id="sName">SportsShoppe</a>
	   		</div>
	   				
	   		<div class="navbar-collapse collapse">   
	   			<ul class="nav navbar-nav">
		   			<li><a href="a">Home</a></li>
		   			<li><a href="a">About</a></li>
		   			<li><a href="a">Catalog</a></li>
		   			<li><a href="a">Contact</a></li>
	   			</ul>
	   		</div>   	
	   	</div>	
	</nav>
	<div class="container-fluid">
		<div class="row">
		    <div class="col-sm-3">
		  		<div class="panel panel-primary panel-horizontal">
					<div class="panel-heading">Panel with panel-primary class</div>
					<div class="panel-body"><a href="#">Panel Content</a></div>
					<div class="panel-body"><a href="#">Panel Content</a></div>
					<div class="panel-body"><a href="#">Panel Content</a></div>
					<div class="panel-body"><a href="#">Panel Content</a></div>
		    	</div>
	    	</div>
	    	<div class="col-sm-9" id="addBlock">
	    		<div class="form-group">
	    			<form class="form-inline">
	    				<label>Search:</label><input id="input1" type="text" class="form-control input-sm" maxlength="64" placeholder="SearchByItemName" />
	    			</form>
	    		</div>
	    		<div class="form-group"> 
	    			<form class="form-inline">
		    			<label >Add Item</label>
		    			<input id="input2" type="text" class="form-control input-sm " maxlength="64" placeholder="ItemName" name="iName" />
		    			<input id="input3" type="text" class="form-control input-sm " maxlength="64" placeholder="Description" name="iDesc" />
		    			<input id="input4" type="text" class="form-control input-sm " maxlength="64" placeholder="Price" name="iPrc" />
		    			<button id="adBtn">Add</button>
	    			</form>
	    		</div>
	    	</div>
	    </div>
	</div>

	
    <script type="text/javascript" src="js/bootstrap.js"></script>
</body>
</html>